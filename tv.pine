//@version=5
indicator("Advanced Crypto KST Trading System", overlay=true)

// ðŸ“Œ Custom KST Inputs (Optimized for Scalping & Swing)
fastLength1 = input(9, "KST Fast ROC 1")
fastLength2 = input(12, "KST Fast ROC 2")
fastLength3 = input(15, "KST Fast ROC 3")
fastLength4 = input(18, "KST Fast ROC 4")
slowLength1 = input(3, "KST SMA 1")
slowLength2 = input(3, "KST SMA 2")
slowLength3 = input(3, "KST SMA 3")
slowLength4 = input(3, "KST SMA 4")
sigLength = input(5, "KST Signal Length")

// ðŸ“Œ RSI Input
rsiLength = input(14, "RSI Length")

// ðŸ“Œ VWAP & Dollar Volume
wapLength = input(20, "WAP Length")
wap = ta.vwma(close, wapLength)
vwap = ta.vwap(close)
dollarVolume = volume * close
dollarVolumeMA = ta.sma(dollarVolume, 20)

// ðŸ“Œ KST Calculation
roc1 = ta.roc(close, fastLength1)
roc2 = ta.roc(close, fastLength2)
roc3 = ta.roc(close, fastLength3)
roc4 = ta.roc(close, fastLength4)

maRoc1 = ta.sma(roc1, slowLength1)
maRoc2 = ta.sma(roc2, slowLength2)
maRoc3 = ta.sma(roc3, slowLength3)
maRoc4 = ta.sma(roc4, slowLength4)

KST = maRoc1 + (2 * maRoc2) + (3 * maRoc3) + (4 * maRoc4)
KSTSignal = ta.sma(KST, sigLength)

// ðŸ“Œ RSI Confirmation
rsi = ta.rsi(close, rsiLength)

// ðŸ“Œ Trading Conditions
longCondition = ta.crossover(KST, KSTSignal) and rsi > 50 and close > vwap and dollarVolume > dollarVolumeMA
shortCondition = ta.crossunder(KST, KSTSignal) and rsi < 50 and close < vwap and dollarVolume > dollarVolumeMA

// ðŸ“Œ Heatmap (Green/Red Dots)
plotshape(series=longCondition, location=location.bottom, color=color.green, style=shape.circle, title="BUY Signal")
plotshape(series=shortCondition, location=location.top, color=color.red, style=shape.circle, title="SELL Signal")

// ðŸ“Œ Background Color Change
bgColor = longCondition ? color.green : shortCondition ? color.red : na
bgcolor(bgColor, transp=90)

// ðŸ“Œ Alerts for Automated Trading
alertcondition(longCondition, title="BUY Alert", message="KST Buy Signal Confirmed!")
alertcondition(shortCondition, title="SELL Alert", message="KST Sell Signal Confirmed!")

// ðŸ“Œ Plotting Everything
plot(wap, title="Weighted Average Price (WAP)", color=color.blue, linewidth=2)
plot(vwap, title="VWAP", color=color.orange, linewidth=2)
plot(dollarVolumeMA, title="Dollar Volume MA", color=color.purple, linewidth=2)
plot(KST, title="KST", color=color.green, linewidth=2)
plot(KSTSignal, title="KST Signal", color=color.red, linewidth=1)
hline(0, "KST Zero Line", color=color.gray)
plot(rsi, title="RSI", color=color.orange, linewidth=2)
